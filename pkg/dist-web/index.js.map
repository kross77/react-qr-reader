{"version":3,"file":"index.js","sources":["../dist-src/QrReader/styles.js","../dist-src/QrReader/helpers/utils.js","../dist-src/QrReader/helpers/image.js","../dist-src/QrReader/helpers/video.js","../dist-src/QrReader/helpers/cleanup.js","../dist-src/QrReader/hooks/useQrReader.js","../dist-src/QrReader/index.js"],"sourcesContent":["export default {\n  container: {\n    overflow: 'hidden',\n    position: 'relative',\n    width: '100%',\n    paddingTop: '100%'\n  },\n  hidden: {\n    display: 'none'\n  },\n  videoPreview: {\n    top: 0,\n    left: 0,\n    display: 'block',\n    position: 'absolute',\n    overflow: 'hidden',\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover',\n    transform: undefined\n  }\n};","export const getDeviceId = async facingMode => {\n  let videoInputDevices = await navigator.mediaDevices.enumerateDevices();\n  videoInputDevices = videoInputDevices.filter(deviceInfo => deviceInfo.kind === 'videoinput');\n\n  if (videoInputDevices.length < 1) {\n    throw new Error('No video input devices found');\n  }\n\n  const regex = facingMode === 'environment' ? /rear|back|environment/gi : /front|user|face/gi;\n  const devices = await Promise.all(videoInputDevices.filter(videoDevice => regex.test(videoDevice.label)).map(async videoDevice => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          deviceId: {\n            exact: videoDevice.deviceId\n          }\n        }\n      });\n      stream.getVideoTracks().forEach(track => {\n        track.getCapabilities();\n        track.getSettings();\n      });\n      stream.getTracks().forEach(track => track.stop());\n      return {\n        deviceId: videoDevice.deviceId,\n        streamError: false\n      };\n    } catch (err) {\n      return {\n        deviceId: videoDevice.deviceId,\n        streamError: true\n      };\n    }\n  }));\n  const [device] = devices.filter(device => !device.streamError);\n\n  if (!device) {\n    throw new Error('No video input devices found');\n  }\n\n  return device.deviceId;\n};\nexport const decodeQR = ({\n  data,\n  width,\n  height\n}) => {\n  // eslint-disable-next-line no-restricted-globals\n  const decoded = self.jsQR(data, width, height, {\n    inversionAttempts: 'attemptBoth'\n  });\n\n  try {\n    return JSON.parse(decoded === null || decoded === void 0 ? void 0 : decoded.data);\n  } catch (err) {\n    return decoded === null || decoded === void 0 ? void 0 : decoded.data;\n  }\n};","export const getImageData = async ({\n  resolution,\n  preview,\n  canvas\n}) => new Promise(resolve => {\n  if (!preview || !canvas) {\n    resolve(null);\n  }\n\n  if (preview.readyState === preview.HAVE_ENOUGH_DATA) {\n    // Get image/video dimensions\n    let width = Math.floor(preview.videoWidth);\n    let height = Math.floor(preview.videoHeight); // Canvas draw offsets\n\n    let hozOffset = 0;\n    let vertOffset = 0; // Crop image to fit 1:1 aspect ratio\n\n    const smallestSize = width < height ? width : height;\n    const ratio = resolution / smallestSize;\n    height = ratio * height;\n    width = ratio * width;\n    vertOffset = (height - resolution) / 2 * -1;\n    hozOffset = (width - resolution) / 2 * -1;\n    canvas.width = resolution;\n    canvas.height = resolution;\n    const ctx = canvas.getContext('2d', {\n      alpha: false\n    });\n    ctx.imageSmoothingEnabled = false; // gives less blurry images\n\n    ctx.drawImage(preview, hozOffset, vertOffset, width, height);\n    const image = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    resolve(image);\n  } else {\n    resolve(null);\n  }\n});","import { getDeviceId } from \"./utils.js\";\nexport const getVideoStream = async ({\n  facingMode,\n  constraints,\n  resolution\n}) => {\n  var _navigator, _navigator2, _navigator2$mediaDevi;\n\n  // Check browser facingMode constraint support\n  // Firefox ignores facingMode or deviceId constraints\n  const isFirefox = /firefox/i.test((_navigator = navigator) === null || _navigator === void 0 ? void 0 : _navigator.userAgent);\n  const supportedConstraints = (_navigator2 = navigator) === null || _navigator2 === void 0 ? void 0 : (_navigator2$mediaDevi = _navigator2.mediaDevices) === null || _navigator2$mediaDevi === void 0 ? void 0 : _navigator2$mediaDevi.getSupportedConstraints();\n  const defaultConstraints = {\n    width: {\n      min: resolution\n    }\n  };\n\n  if (supportedConstraints !== null && supportedConstraints !== void 0 && supportedConstraints.facingMode) {\n    defaultConstraints.facingMode = {\n      ideal: facingMode\n    };\n  }\n\n  if (supportedConstraints !== null && supportedConstraints !== void 0 && supportedConstraints.frameRate) {\n    defaultConstraints.frameRate = {\n      ideal: 25,\n      min: 10\n    };\n  }\n\n  let video = null;\n\n  if (supportedConstraints.facingMode || isFirefox) {\n    video = constraints || defaultConstraints;\n  } else {\n    const deviceId = await getDeviceId(facingMode);\n    video = { ...{\n        deviceId\n      },\n      ...constraints\n    };\n  }\n\n  return await navigator.mediaDevices.getUserMedia({\n    video\n  });\n};\nexport const prepareVideoStream = async ({\n  preview,\n  stream\n}) => new Promise((resolve, reject) => {\n  try {\n    if (!preview || !stream) {\n      resolve();\n    }\n\n    window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    if ('srcObject' in preview) {\n      preview.srcObject = stream;\n    } else if ('mozSrcObject' in preview) {\n      preview.mozSrcObject = stream;\n    } else {\n      preview.src = window.URL && window.URL.createObjectURL(stream) || stream;\n    } // IOS play in fullscreen\n\n\n    preview.setAttribute('playsInline', true);\n    resolve();\n  } catch (err) {\n    reject(err);\n  }\n});","export const clearPreview = preview => {\n  if (preview) {\n    preview.pause();\n    preview.mozSrcObject = null;\n    preview.srcObject = null;\n    preview.src = '';\n  }\n};\nexport const clearStreams = streams => {\n  const pc = new RTCPeerConnection();\n  streams.forEach(stream => {\n    if (stream.stop) {\n      // Legacy way for older browsers\n      stream.stop && stream.stop();\n      pc.addStream && pc.addStream(stream);\n    } else {\n      // New way for modern browsers\n      stream.getTracks().forEach(track => {\n        track.enabled = !track.enabled;\n        track.stop();\n        pc.addTrack(track, stream);\n      });\n    }\n  });\n};\nexport const clearFrames = cancelIds => {\n  cancelIds.forEach(window.cancelAnimationFrame);\n};","import { useWorker } from '@koale/useworker';\nimport { useEffect, useRef } from 'react';\nimport { decodeQR } from \"../helpers/utils.js\";\nimport { getImageData } from \"../helpers/image.js\";\nimport { getVideoStream, prepareVideoStream } from \"../helpers/video.js\";\nimport { clearFrames, clearPreview, clearStreams } from \"../helpers/cleanup.js\";\nconst JSQR = 'https://cdn.jsdelivr.net/npm/jsqr@1.2.0/dist/jsQR.min.js';\nexport const useQrReader = ({\n  callbacks: [onLoad, onScan, onError],\n  refs: [canvas, preview],\n  constraints,\n  facingMode,\n  resolution,\n  debug\n}) => {\n  const cancelIds = useRef([]);\n  const streams = useRef([]); // eslint-disable-next-line no-unused-vars\n\n  const [decodeQrImage, {\n    kill: clearWorker\n  }] = useWorker(decodeQR, {\n    remoteDependencies: [JSQR],\n    autoTerminate: false\n  });\n\n  const tryQrScan = async () => {\n    try {\n      const data = await getImageData({\n        preview: preview.current,\n        canvas: canvas.current,\n        resolution\n      });\n      debug && debug(data, 'raw_data');\n\n      if (!data) {\n        throw '[QrReader]: error while trying to decode value';\n      }\n\n      const decoded = await decodeQrImage(data);\n\n      if (typeof onScan === 'function') {\n        debug && debug(decoded, 'value');\n        onScan(decoded);\n      }\n    } catch (err) {\n      if (typeof onError === 'function') {\n        debug && debug(err, 'error');\n        onError(err);\n      }\n    } finally {\n      const cancelID = window.requestAnimationFrame(tryQrScan);\n      cancelIds.current.push(cancelID);\n    }\n  };\n\n  const initQrScan = async () => {\n    try {\n      const stream = await getVideoStream({\n        constraints,\n        resolution,\n        facingMode\n      });\n      streams.current.push(stream);\n      await prepareVideoStream({\n        preview: preview.current,\n        stream\n      });\n      await preview.current.play();\n\n      if (typeof onLoad === 'function') {\n        debug && debug(stream, 'load');\n        onLoad(stream);\n      }\n\n      const cancelID = window.requestAnimationFrame(tryQrScan);\n      cancelIds.current.push(cancelID);\n    } catch (err) {\n      if (typeof onError === 'function') {\n        debug && debug(err, 'error');\n        onError(err);\n      }\n    }\n  };\n\n  useEffect(() => {\n    const clearId = setTimeout(initQrScan, 500);\n    return () => {\n      clearWorker();\n      clearTimeout(clearId);\n      clearFrames(cancelIds.current);\n      clearPreview(preview.current);\n      clearStreams(streams.current);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};","import styles from \"./styles.js\";\nimport React, { useRef } from 'react';\nimport { useQrReader } from \"./hooks/useQrReader.js\";\nexport const QrReader = ({\n  constraints,\n  facingMode,\n  resolution,\n  ViewFinder,\n  className,\n  onError,\n  onScan,\n  onLoad,\n  style,\n  debug\n}) => {\n  const canvasRef = useRef(null);\n  const videoRef = useRef(null);\n  useQrReader({\n    callbacks: [onLoad, onScan, onError],\n    refs: [canvasRef, videoRef],\n    constraints,\n    facingMode,\n    resolution,\n    debug\n  });\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: className,\n    style: style\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    style: styles.container\n  }, !!ViewFinder && /*#__PURE__*/React.createElement(ViewFinder, null), /*#__PURE__*/React.createElement(\"video\", {\n    muted: true,\n    ref: videoRef,\n    style: { ...styles.videoPreview,\n      transform: facingMode === 'user' && 'scaleX(-1)'\n    }\n  }), /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: styles.hidden\n  })));\n};\nQrReader.displayName = 'QrReader';\nQrReader.defaultProps = {\n  resolution: 600,\n  constraints: null,\n  facingMode: 'environment'\n};\nexport default QrReader;"],"names":[],"mappings":"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"}